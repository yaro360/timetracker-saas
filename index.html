<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>TimeTracker - Multi-Company Platform</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            -webkit-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            padding: 30px;
            margin-bottom: 20px;
        }

        .login-card {
            max-width: 400px;
            margin: 50px auto;
        }

        .logo {
            width: 60px;
            height: 60px;
            background: #4F46E5;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin: 0 auto 20px;
            font-size: 24px;
            font-weight: bold;
        }

        h1 {
            text-align: center;
            color: #1F2937;
            margin-bottom: 10px;
            font-size: 2rem;
            font-weight: 700;
        }

        h2 {
            color: #1F2937;
            margin-bottom: 20px;
            font-size: 1.5rem;
            font-weight: 600;
        }

        p {
            color: #6B7280;
            line-height: 1.6;
        }

        .subtitle {
            text-align: center;
            color: #6B7280;
            margin-bottom: 30px;
            font-size: 1rem;
        }

        .form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-weight: 500;
            color: #374151;
            font-size: 0.875rem;
        }

        .form-group input,
        .form-group select {
            padding: 12px 16px;
            border: 2px solid #E5E7EB;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.2s;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #4F46E5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            min-height: 44px;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-primary {
            background: #4F46E5;
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #4338CA;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }

        .btn-outline {
            background: transparent;
            color: #4F46E5;
            border: 2px solid #4F46E5;
        }

        .btn-outline:hover:not(:disabled) {
            background: #4F46E5;
            color: white;
        }

        .tab-container {
            display: flex;
            background: #F3F4F6;
            border-radius: 8px;
            padding: 4px;
            margin-bottom: 20px;
        }

        .tab {
            flex: 1;
            padding: 12px 16px;
            background: transparent;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            color: #6B7280;
        }

        .tab.active {
            background: white;
            color: #4F46E5;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .demo-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #E5E7EB;
        }

        .demo-label {
            font-size: 0.875rem;
            color: #6B7280;
            margin-bottom: 10px;
            text-align: center;
        }

        .demo-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn-demo {
            background: #F3F4F6;
            color: #374151;
            border: 1px solid #D1D5DB;
            font-size: 0.875rem;
            padding: 8px 16px;
        }

        .btn-demo:hover {
            background: #E5E7EB;
        }

        .loading {
            text-align: center;
            color: white;
            font-size: 1.2rem;
            padding: 40px;
        }
    </style>
</head>
<body>
    <div id="root">
        <div class="loading">Loading TimeTracker...</div>
    </div>
    
    <script type="text/babel">
        const { useState, useEffect, createContext, useContext } = React;
        const { createRoot } = ReactDOM;

        // Auth Context
        const AuthContext = createContext();

        const useAuth = () => {
            const context = useContext(AuthContext);
            if (!context) {
                throw new Error('useAuth must be used within an AuthProvider');
            }
            return context;
        };

        const AuthProvider = ({ children }) => {
            const [user, setUser] = useState(null);

            const login = (username, password) => {
                try {
                    const users = JSON.parse(localStorage.getItem('users') || '[]');
                    const foundUser = users.find(u => u.username === username && u.password === password);
                    
                    if (foundUser) {
                        const userData = { ...foundUser };
                        delete userData.password;
                        setUser(userData);
                        localStorage.setItem('currentUser', JSON.stringify(userData));
                        return true;
                    }
                    return false;
                } catch (error) {
                    console.error('Login error:', error);
                    return false;
                }
            };

            const logout = () => {
                setUser(null);
                localStorage.removeItem('currentUser');
            };

            const register = (userData) => {
                try {
                    const users = JSON.parse(localStorage.getItem('users') || '[]');
                    
                    if (users.find(u => u.username === userData.username)) {
                        alert('Username already exists');
                        return false;
                    }

                    if (users.find(u => u.email === userData.email)) {
                        alert('Email already exists');
                        return false;
                    }

                    const newUser = {
                        id: Date.now().toString(),
                        ...userData,
                        createdAt: new Date().toISOString()
                    };

                    users.push(newUser);
                    localStorage.setItem('users', JSON.stringify(users));
                    
                    const userDataForState = { ...newUser };
                    delete userDataForState.password;
                    setUser(userDataForState);
                    localStorage.setItem('currentUser', JSON.stringify(userDataForState));
                    
                    return true;
                } catch (error) {
                    console.error('Registration error:', error);
                    return false;
                }
            };

            const createCompany = (companyData, ownerData) => {
                try {
                    const companies = JSON.parse(localStorage.getItem('companies') || '[]');
                    const users = JSON.parse(localStorage.getItem('users') || '[]');
                    
                    if (companies.find(c => c.name === companyData.name)) {
                        alert('Company name already exists');
                        return false;
                    }

                    if (users.find(u => u.username === ownerData.username)) {
                        alert('Username already exists');
                        return false;
                    }

                    if (users.find(u => u.email === ownerData.email)) {
                        alert('Email already exists');
                        return false;
                    }

                    const companyId = Date.now().toString();
                    const ownerId = (Date.now() + 1).toString();

                    const newCompany = {
                        id: companyId,
                        ...companyData,
                        createdAt: new Date().toISOString()
                    };

                    const newOwner = {
                        id: ownerId,
                        ...ownerData,
                        companyId: companyId,
                        role: 'owner',
                        createdAt: new Date().toISOString()
                    };

                    companies.push(newCompany);
                    users.push(newOwner);
                    
                    localStorage.setItem('companies', JSON.stringify(companies));
                    localStorage.setItem('users', JSON.stringify(users));
                    
                    const userDataForState = { ...newOwner };
                    delete userDataForState.password;
                    setUser(userDataForState);
                    localStorage.setItem('currentUser', JSON.stringify(userDataForState));
                    
                    return true;
                } catch (error) {
                    console.error('Company creation error:', error);
                    return false;
                }
            };

            const value = {
                user,
                login,
                logout,
                register,
                createCompany
            };

            return React.createElement(AuthContext.Provider, { value }, children);
        };

        // Login Form Component
        const LoginForm = ({ onLogin }) => {
            const [formData, setFormData] = useState({
                username: '',
                password: ''
            });
            const [isLoading, setIsLoading] = useState(false);

            const handleChange = (e) => {
                setFormData({
                    ...formData,
                    [e.target.name]: e.target.value
                });
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                setIsLoading(true);

                try {
                    const success = onLogin(formData.username, formData.password);
                    if (!success) {
                        alert('Invalid credentials. Please try again.');
                    }
                } catch (error) {
                    console.error('Login error:', error);
                    alert('Login failed. Please try again.');
                } finally {
                    setIsLoading(false);
                }
            };

            const handleDemoLogin = (role) => {
                const demoCredentials = {
                    owner: { username: 'demo-owner', password: 'password' },
                    manager: { username: 'demo-manager', password: 'password' },
                    employee: { username: 'demo-employee', password: 'password' }
                };

                const credentials = demoCredentials[role];
                if (credentials) {
                    setFormData(credentials);
                    onLogin(credentials.username, credentials.password);
                }
            };

            return React.createElement('form', { onSubmit: handleSubmit, className: 'form' },
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { htmlFor: 'username' }, 'Username'),
                    React.createElement('input', {
                        type: 'text',
                        id: 'username',
                        name: 'username',
                        value: formData.username,
                        onChange: handleChange,
                        required: true,
                        placeholder: 'Enter your username'
                    })
                ),
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { htmlFor: 'password' }, 'Password'),
                    React.createElement('input', {
                        type: 'password',
                        id: 'password',
                        name: 'password',
                        value: formData.password,
                        onChange: handleChange,
                        required: true,
                        placeholder: 'Enter your password'
                    })
                ),
                React.createElement('button', { 
                    type: 'submit', 
                    className: 'btn btn-primary',
                    disabled: isLoading
                }, isLoading ? 'Signing in...' : 'Sign In'),
                React.createElement('div', { className: 'demo-section' },
                    React.createElement('p', { className: 'demo-label' }, 'Quick Demo Access:'),
                    React.createElement('div', { className: 'demo-buttons' },
                        React.createElement('button', {
                            type: 'button',
                            className: 'btn btn-demo',
                            onClick: () => handleDemoLogin('owner')
                        }, 'Owner Demo'),
                        React.createElement('button', {
                            type: 'button',
                            className: 'btn btn-demo',
                            onClick: () => handleDemoLogin('manager')
                        }, 'Manager Demo'),
                        React.createElement('button', {
                            type: 'button',
                            className: 'btn btn-demo',
                            onClick: () => handleDemoLogin('employee')
                        }, 'Employee Demo')
                    )
                )
            );
        };

        // Register Form Component
        const RegisterForm = ({ onRegister }) => {
            const [formData, setFormData] = useState({
                firstName: '',
                lastName: '',
                username: '',
                email: '',
                password: '',
                confirmPassword: '',
                role: 'employee'
            });
            const [isLoading, setIsLoading] = useState(false);

            const handleChange = (e) => {
                setFormData({
                    ...formData,
                    [e.target.name]: e.target.value
                });
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                setIsLoading(true);

                if (formData.password !== formData.confirmPassword) {
                    alert('Passwords do not match');
                    setIsLoading(false);
                    return;
                }

                if (formData.password.length < 6) {
                    alert('Password must be at least 6 characters long');
                    setIsLoading(false);
                    return;
                }

                try {
                    const userData = {
                        firstName: formData.firstName,
                        lastName: formData.lastName,
                        username: formData.username,
                        email: formData.email,
                        password: formData.password,
                        role: formData.role,
                        companyId: null
                    };

                    const success = onRegister(userData);
                    if (!success) {
                        alert('Registration failed. Username or email may already exist.');
                    }
                } catch (error) {
                    console.error('Registration error:', error);
                    alert('Registration failed. Please try again.');
                } finally {
                    setIsLoading(false);
                }
            };

            return React.createElement('form', { onSubmit: handleSubmit, className: 'form' },
                React.createElement('div', { style: { display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' } },
                    React.createElement('div', { className: 'form-group' },
                        React.createElement('label', { htmlFor: 'firstName' }, 'First Name'),
                        React.createElement('input', {
                            type: 'text',
                            id: 'firstName',
                            name: 'firstName',
                            value: formData.firstName,
                            onChange: handleChange,
                            required: true,
                            placeholder: 'Enter first name'
                        })
                    ),
                    React.createElement('div', { className: 'form-group' },
                        React.createElement('label', { htmlFor: 'lastName' }, 'Last Name'),
                        React.createElement('input', {
                            type: 'text',
                            id: 'lastName',
                            name: 'lastName',
                            value: formData.lastName,
                            onChange: handleChange,
                            required: true,
                            placeholder: 'Enter last name'
                        })
                    )
                ),
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { htmlFor: 'username' }, 'Username'),
                    React.createElement('input', {
                        type: 'text',
                        id: 'username',
                        name: 'username',
                        value: formData.username,
                        onChange: handleChange,
                        required: true,
                        placeholder: 'Choose a username'
                    })
                ),
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { htmlFor: 'email' }, 'Email'),
                    React.createElement('input', {
                        type: 'email',
                        id: 'email',
                        name: 'email',
                        value: formData.email,
                        onChange: handleChange,
                        required: true,
                        placeholder: 'Enter your email'
                    })
                ),
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { htmlFor: 'role' }, 'Role'),
                    React.createElement('select', {
                        id: 'role',
                        name: 'role',
                        value: formData.role,
                        onChange: handleChange,
                        required: true
                    },
                        React.createElement('option', { value: 'employee' }, 'Employee'),
                        React.createElement('option', { value: 'manager' }, 'Manager')
                    )
                ),
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { htmlFor: 'password' }, 'Password'),
                    React.createElement('input', {
                        type: 'password',
                        id: 'password',
                        name: 'password',
                        value: formData.password,
                        onChange: handleChange,
                        required: true,
                        placeholder: 'Create a password',
                        minLength: 6
                    })
                ),
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { htmlFor: 'confirmPassword' }, 'Confirm Password'),
                    React.createElement('input', {
                        type: 'password',
                        id: 'confirmPassword',
                        name: 'confirmPassword',
                        value: formData.confirmPassword,
                        onChange: handleChange,
                        required: true,
                        placeholder: 'Confirm your password',
                        minLength: 6
                    })
                ),
                React.createElement('button', { 
                    type: 'submit', 
                    className: 'btn btn-primary',
                    disabled: isLoading
                }, isLoading ? 'Creating Account...' : 'Create Account')
            );
        };

        // Company Registration Component
        const CompanyRegistration = ({ onCompanyRegistration }) => {
            const [step, setStep] = useState(1);
            const [companyData, setCompanyData] = useState({
                name: '',
                industry: 'construction',
                address: '',
                phone: '',
                email: ''
            });
            const [ownerData, setOwnerData] = useState({
                firstName: '',
                lastName: '',
                username: '',
                email: '',
                password: '',
                confirmPassword: ''
            });
            const [isLoading, setIsLoading] = useState(false);

            const industries = [
                { value: 'construction', label: 'Construction' },
                { value: 'healthcare', label: 'Healthcare' },
                { value: 'retail', label: 'Retail' },
                { value: 'manufacturing', label: 'Manufacturing' },
                { value: 'transportation', label: 'Transportation' },
                { value: 'security', label: 'Security' },
                { value: 'cleaning', label: 'Cleaning Services' },
                { value: 'other', label: 'Other' }
            ];

            const handleCompanyChange = (e) => {
                setCompanyData({
                    ...companyData,
                    [e.target.name]: e.target.value
                });
            };

            const handleOwnerChange = (e) => {
                setOwnerData({
                    ...ownerData,
                    [e.target.name]: e.target.value
                });
            };

            const handleNext = () => {
                if (step === 1) {
                    if (!companyData.name || !companyData.industry || !companyData.email) {
                        alert('Please fill in all required company fields');
                        return;
                    }
                    setStep(2);
                }
            };

            const handleBack = () => {
                setStep(1);
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                setIsLoading(true);

                if (ownerData.password !== ownerData.confirmPassword) {
                    alert('Passwords do not match');
                    setIsLoading(false);
                    return;
                }

                if (ownerData.password.length < 6) {
                    alert('Password must be at least 6 characters long');
                    setIsLoading(false);
                    return;
                }

                try {
                    const success = onCompanyRegistration(companyData, {
                        ...ownerData,
                        role: 'owner'
                    });
                    
                    if (!success) {
                        alert('Company registration failed. Username or email may already exist.');
                    }
                } catch (error) {
                    console.error('Company registration error:', error);
                    alert('Company registration failed. Please try again.');
                } finally {
                    setIsLoading(false);
                }
            };

            if (step === 1) {
                return React.createElement('form', { onSubmit: (e) => { e.preventDefault(); handleNext(); }, className: 'form' },
                    React.createElement('div', { className: 'form-group' },
                        React.createElement('label', { htmlFor: 'name' }, 'Company Name *'),
                        React.createElement('input', {
                            type: 'text',
                            id: 'name',
                            name: 'name',
                            value: companyData.name,
                            onChange: handleCompanyChange,
                            required: true,
                            placeholder: 'Enter company name'
                        })
                    ),
                    React.createElement('div', { className: 'form-group' },
                        React.createElement('label', { htmlFor: 'industry' }, 'Industry *'),
                        React.createElement('select', {
                            id: 'industry',
                            name: 'industry',
                            value: companyData.industry,
                            onChange: handleCompanyChange,
                            required: true
                        }, industries.map(industry => 
                            React.createElement('option', { key: industry.value, value: industry.value }, industry.label)
                        ))
                    ),
                    React.createElement('div', { className: 'form-group' },
                        React.createElement('label', { htmlFor: 'address' }, 'Company Address'),
                        React.createElement('input', {
                            type: 'text',
                            id: 'address',
                            name: 'address',
                            value: companyData.address,
                            onChange: handleCompanyChange,
                            placeholder: 'Enter company address'
                        })
                    ),
                    React.createElement('div', { style: { display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' } },
                        React.createElement('div', { className: 'form-group' },
                            React.createElement('label', { htmlFor: 'phone' }, 'Phone Number'),
                            React.createElement('input', {
                                type: 'tel',
                                id: 'phone',
                                name: 'phone',
                                value: companyData.phone,
                                onChange: handleCompanyChange,
                                placeholder: 'Enter phone number'
                            })
                        ),
                        React.createElement('div', { className: 'form-group' },
                            React.createElement('label', { htmlFor: 'email' }, 'Company Email *'),
                            React.createElement('input', {
                                type: 'email',
                                id: 'email',
                                name: 'email',
                                value: companyData.email,
                                onChange: handleCompanyChange,
                                required: true,
                                placeholder: 'Enter company email'
                            })
                        )
                    ),
                    React.createElement('button', { type: 'submit', className: 'btn btn-primary' }, 'Next: Owner Account')
                );
            }

            return React.createElement('form', { onSubmit: handleSubmit, className: 'form' },
                React.createElement('div', { style: { display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' } },
                    React.createElement('div', { className: 'form-group' },
                        React.createElement('label', { htmlFor: 'firstName' }, 'First Name'),
                        React.createElement('input', {
                            type: 'text',
                            id: 'firstName',
                            name: 'firstName',
                            value: ownerData.firstName,
                            onChange: handleOwnerChange,
                            required: true,
                            placeholder: 'Enter first name'
                        })
                    ),
                    React.createElement('div', { className: 'form-group' },
                        React.createElement('label', { htmlFor: 'lastName' }, 'Last Name'),
                        React.createElement('input', {
                            type: 'text',
                            id: 'lastName',
                            name: 'lastName',
                            value: ownerData.lastName,
                            onChange: handleOwnerChange,
                            required: true,
                            placeholder: 'Enter last name'
                        })
                    )
                ),
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { htmlFor: 'username' }, 'Username'),
                    React.createElement('input', {
                        type: 'text',
                        id: 'username',
                        name: 'username',
                        value: ownerData.username,
                        onChange: handleOwnerChange,
                        required: true,
                        placeholder: 'Choose a username'
                    })
                ),
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { htmlFor: 'email' }, 'Email'),
                    React.createElement('input', {
                        type: 'email',
                        id: 'email',
                        name: 'email',
                        value: ownerData.email,
                        onChange: handleOwnerChange,
                        required: true,
                        placeholder: 'Enter your email'
                    })
                ),
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { htmlFor: 'password' }, 'Password'),
                    React.createElement('input', {
                        type: 'password',
                        id: 'password',
                        name: 'password',
                        value: ownerData.password,
                        onChange: handleOwnerChange,
                        required: true,
                        placeholder: 'Create a password',
                        minLength: 6
                    })
                ),
                React.createElement('div', { className: 'form-group' },
                    React.createElement('label', { htmlFor: 'confirmPassword' }, 'Confirm Password'),
                    React.createElement('input', {
                        type: 'password',
                        id: 'confirmPassword',
                        name: 'confirmPassword',
                        value: ownerData.confirmPassword,
                        onChange: handleOwnerChange,
                        required: true,
                        placeholder: 'Confirm your password',
                        minLength: 6
                    })
                ),
                React.createElement('div', { style: { display: 'flex', gap: '12px', justifyContent: 'space-between', marginTop: '24px' } },
                    React.createElement('button', { 
                        type: 'button', 
                        className: 'btn btn-outline',
                        onClick: handleBack
                    }, 'Back'),
                    React.createElement('button', { 
                        type: 'submit', 
                        className: 'btn btn-primary',
                        disabled: isLoading
                    }, isLoading ? 'Creating Company...' : 'Create Company')
                )
            );
        };

        // Main App Component
        const App = () => {
            const [currentView, setCurrentView] = useState('login');
            const [user, setUser] = useState(null);

            useEffect(() => {
                const savedUser = localStorage.getItem('currentUser');
                if (savedUser) {
                    const userData = JSON.parse(savedUser);
                    setUser(userData);
                }
            }, []);

            const handleLogin = (username, password) => {
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const foundUser = users.find(u => u.username === username && u.password === password);
                
                if (foundUser) {
                    const userData = { ...foundUser };
                    delete userData.password;
                    setUser(userData);
                    localStorage.setItem('currentUser', JSON.stringify(userData));
                    return true;
                }
                return false;
            };

            const handleRegister = (userData) => {
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                
                if (users.find(u => u.username === userData.username)) {
                    alert('Username already exists');
                    return false;
                }

                if (users.find(u => u.email === userData.email)) {
                    alert('Email already exists');
                    return false;
                }

                const newUser = {
                    id: Date.now().toString(),
                    ...userData,
                    createdAt: new Date().toISOString()
                };

                users.push(newUser);
                localStorage.setItem('users', JSON.stringify(users));
                
                const userDataForState = { ...newUser };
                delete userDataForState.password;
                setUser(userDataForState);
                localStorage.setItem('currentUser', JSON.stringify(userDataForState));
                
                return true;
            };

            const handleCompanyRegistration = (companyData, ownerData) => {
                const companies = JSON.parse(localStorage.getItem('companies') || '[]');
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                
                if (companies.find(c => c.name === companyData.name)) {
                    alert('Company name already exists');
                    return false;
                }

                if (users.find(u => u.username === ownerData.username)) {
                    alert('Username already exists');
                    return false;
                }

                if (users.find(u => u.email === ownerData.email)) {
                    alert('Email already exists');
                    return false;
                }

                const companyId = Date.now().toString();
                const ownerId = (Date.now() + 1).toString();

                const newCompany = {
                    id: companyId,
                    ...companyData,
                    createdAt: new Date().toISOString()
                };

                const newOwner = {
                    id: ownerId,
                    ...ownerData,
                    companyId: companyId,
                    role: 'owner',
                    createdAt: new Date().toISOString()
                };

                companies.push(newCompany);
                users.push(newOwner);
                
                localStorage.setItem('companies', JSON.stringify(companies));
                localStorage.setItem('users', JSON.stringify(users));
                
                const userDataForState = { ...newOwner };
                delete userDataForState.password;
                setUser(userDataForState);
                localStorage.setItem('currentUser', JSON.stringify(userDataForState));
                
                return true;
            };

            const handleLogout = () => {
                setUser(null);
                localStorage.removeItem('currentUser');
            };

            if (user) {
                // Simple dashboard based on role
                if (user.role === 'employee') {
                    return React.createElement('div', { className: 'container' },
                        React.createElement('div', { className: 'card' },
                            React.createElement('h1', null, `Welcome, ${user.firstName}!`),
                            React.createElement('p', { style: { marginBottom: '20px' } }, `Role: ${user.role}`),
                            
                            React.createElement('div', { style: { display: 'flex', gap: '10px', marginBottom: '20px' } },
                                React.createElement('button', { 
                                    className: 'btn btn-primary',
                                    onClick: () => alert('Clock In - Feature coming soon!')
                                }, 'Clock In'),
                                React.createElement('button', { 
                                    className: 'btn btn-secondary',
                                    onClick: () => alert('Clock Out - Feature coming soon!')
                                }, 'Clock Out')
                            ),
                            
                            React.createElement('div', { style: { marginBottom: '20px' } },
                                React.createElement('h3', null, 'Today\'s Time Entries'),
                                React.createElement('p', null, 'No entries yet - Clock in to start tracking!')
                            ),
                            
                            React.createElement('button', { 
                                className: 'btn btn-outline',
                                onClick: handleLogout
                            }, 'Logout')
                        )
                    );
                } else if (user.role === 'manager') {
                    return React.createElement('div', { className: 'container' },
                        React.createElement('div', { className: 'card' },
                            React.createElement('h1', null, `Welcome, ${user.firstName}!`),
                            React.createElement('p', { style: { marginBottom: '20px' } }, `Role: ${user.role}`),
                            
                            React.createElement('div', { style: { marginBottom: '20px' } },
                                React.createElement('h3', null, 'Team Management'),
                                React.createElement('p', null, 'Team overview - Feature coming soon!')
                            ),
                            
                            React.createElement('button', { 
                                className: 'btn btn-outline',
                                onClick: handleLogout
                            }, 'Logout')
                        )
                    );
                } else if (user.role === 'owner') {
                    return React.createElement('div', { className: 'container' },
                        React.createElement('div', { className: 'card' },
                            React.createElement('h1', null, `Welcome, ${user.firstName}!`),
                            React.createElement('p', { style: { marginBottom: '20px' } }, `Role: ${user.role}`),
                            
                            React.createElement('div', { style: { marginBottom: '20px' } },
                                React.createElement('h3', null, 'Company Management'),
                                React.createElement('p', null, 'Company overview - Feature coming soon!')
                            ),
                            
                            React.createElement('button', { 
                                className: 'btn btn-outline',
                                onClick: handleLogout
                            }, 'Logout')
                        )
                    );
                } else {
                    return React.createElement('div', { style: { padding: '20px', textAlign: 'center' } },
                        React.createElement('h1', null, `Welcome, ${user.firstName}!`),
                        React.createElement('p', { style: { marginBottom: '20px' } }, `Role: ${user.role}`),
                        React.createElement('button', { 
                            className: 'btn btn-outline',
                            onClick: handleLogout
                        }, 'Logout')
                    );
                }
            }

            return React.createElement('div', { className: 'container' },
                React.createElement('div', { className: 'login-card' },
                    React.createElement('div', { className: 'logo' }, '⏰'),
                    React.createElement('h1', null, 'TimeTracker'),
                    React.createElement('p', { className: 'subtitle' }, 'Multi-Company Location-Based Timesheet Platform'),
                    
                    React.createElement('div', { className: 'tab-container' },
                        React.createElement('button', { 
                            className: `tab ${currentView === 'login' ? 'active' : ''}`,
                            onClick: () => setCurrentView('login')
                        }, 'Login'),
                        React.createElement('button', { 
                            className: `tab ${currentView === 'register' ? 'active' : ''}`,
                            onClick: () => setCurrentView('register')
                        }, 'Register'),
                        React.createElement('button', { 
                            className: `tab ${currentView === 'company' ? 'active' : ''}`,
                            onClick: () => setCurrentView('company')
                        }, 'Start Company')
                    ),

                    currentView === 'login' && React.createElement(LoginForm, { onLogin: handleLogin }),
                    currentView === 'register' && React.createElement(RegisterForm, { onRegister: handleRegister }),
                    currentView === 'company' && React.createElement(CompanyRegistration, { onCompanyRegistration: handleCompanyRegistration })
                )
            );
        };

        // Render the app
        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(AuthProvider, null, React.createElement(App)));
    </script>
</body>
</html>

